{"title":"MyBatis 笔记","uid":"b33ca6541acca323e851423a4647401a","slug":"mybatis","date":"2021-12-01T08:21:18.000Z","updated":"2021-12-03T09:58:44.710Z","comments":true,"path":"api/articles/mybatis.json","keywords":null,"cover":null,"content":"<h1 id=\"动态SQL\"><a href=\"#动态SQL\" class=\"headerlink\" title=\"动态SQL\"></a>动态SQL</h1><ul>\n<li>if</li>\n<li>choose (when, otherwise)</li>\n<li>trim (where, set)</li>\n<li>foreach</li>\n</ul>\n<h2 id=\"if\"><a href=\"#if\" class=\"headerlink\" title=\"if\"></a>if</h2><p>如果传入了name，则匹配name字段，否则返回所有记录</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;select id&#x3D;&quot;getModelList&quot; parameterType&#x3D;&quot;java.util.Map&quot; resultType&#x3D;&quot;java.util.Map&quot;&gt;\n  SELECT\n    id,\n    name,\n    birthday\n  FROM person_table\n  WHERE 1&#x3D;1\n  &lt;if test&#x3D;&quot;name !&#x3D; null and name !&#x3D;&#39;&#39;&quot;&gt;\n    AND name &#x3D; #&#123;name&#125;\n  &lt;&#x2F;if&gt;\n&lt;&#x2F;select&gt;</code></pre>\n\n<h2 id=\"where\"><a href=\"#where\" class=\"headerlink\" title=\"where\"></a>where</h2><p>之前的if实例中使用了1=1来解决没有传入name入参，导致WHERE子句为空的情况。这种情况也可以使用where</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;select id&#x3D;&quot;getModelList&quot; parameterType&#x3D;&quot;java.util.Map&quot; resultType&#x3D;&quot;java.util.Map&quot;&gt;\n  SELECT\n    id,\n    name,\n    birthday\n  FROM person_table\n  &lt;where&gt;\n    &lt;if test&#x3D;&quot;name !&#x3D; null and name !&#x3D;&#39;&#39;&quot;&gt;\n      name &#x3D; #&#123;name&#125;\n    &lt;&#x2F;if&gt;\n  &lt;&#x2F;where&gt;\n&lt;&#x2F;select&gt;</code></pre>\n<p>如果有多个字段，要将AND写在条件句首， MyBatis会根据需要自动截去AND</p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;select id&#x3D;&quot;getModelList&quot; parameterType&#x3D;&quot;java.util.Map&quot; resultType&#x3D;&quot;java.util.Map&quot;&gt;\n  SELECT\n    id,\n    name,\n    birthday\n  FROM person_table\n  &lt;where&gt;\n    &lt;if test&#x3D;&quot;name !&#x3D; null and name !&#x3D;&#39;&#39;&quot;&gt;\n      name &#x3D; #&#123;name&#125;\n    &lt;&#x2F;if&gt;\n    &lt;if test&#x3D;&quot;id !&#x3D; null and id !&#x3D; &#39;&#39;&quot;&gt;\n      AND id &#x3D; #&#123;id&#125;\n    &lt;&#x2F;if&gt;\n  &lt;&#x2F;where&gt;\n&lt;&#x2F;select&gt;</code></pre>\n\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><p><a href=\"https://mybatis.net.cn/\">MyBatis官网</a></p>\n","feature":true,"text":"动态SQL if choose (when, otherwise) trim (where, set) foreach if如果传入了name，则匹配name字段，否则返回所有记录 &lt;select id&#x3D;&quot;getModelList&quot; param...","link":"","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8A%A8%E6%80%81SQL\"><span class=\"toc-text\">动态SQL</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#if\"><span class=\"toc-text\">if</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#where\"><span class=\"toc-text\">where</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\"><span class=\"toc-text\">参考资料</span></a></li></ol>","author":{"name":"風籟","slug":"blog-author","avatar":"/img/profile.png","link":"/","description":"Java/Python <br/> Dota 2/MHW/FFXIV","socials":{"github":"https://github.com/yinhao-f","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/109981771?spm_id_from=333.1007.0.0"},"steam":{"icon":"/svg/steam.svg","link":"https://steamcommunity.com/profiles/76561198119413566"}}}},"mapped":true,"prev_post":{},"next_post":{"title":"MySQL Cheatsheet","uid":"3ac38909d2fd409725ed531ea0233490","slug":"mysql-cheatsheet","date":"2021-11-10T07:01:38.000Z","updated":"2021-12-07T03:12:03.806Z","comments":true,"path":"api/articles/mysql-cheatsheet.json","keywords":null,"cover":null,"text":"前言实用MySQL语句小抄，持续更新SQL，全称Structured Query Language，读作”sequel”或”S-Q-L” 命令行语句连接服务器&gt;mysql -u root -p #root是连接所使用的用户名 断开连接mysql&gt; quit Bye 查...","link":"","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"MySQL","slug":"MySQL","count":2,"path":"api/tags/MySQL.json"}],"author":{"name":"風籟","slug":"blog-author","avatar":"/img/profile.png","link":"/","description":"Java/Python <br/> Dota 2/MHW/FFXIV","socials":{"github":"https://github.com/yinhao-f","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/109981771?spm_id_from=333.1007.0.0"},"steam":{"icon":"/svg/steam.svg","link":"https://steamcommunity.com/profiles/76561198119413566"}}}},"feature":true}}